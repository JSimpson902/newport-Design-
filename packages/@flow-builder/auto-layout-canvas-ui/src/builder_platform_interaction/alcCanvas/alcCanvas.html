<template>
    <div if:true={lastClickedElementGuid} class="canvas-overlay" onclick={handleOverlayClick}></div>
    <div if:true={showSpinner} class="slds-spinner_container">
        <lightning-spinner variant="brand"></lightning-spinner>
    </div>

    <div
        class="canvas"
        onclick={handleCanvasClick}
        onmouseenter={handleCanvasMouseEnter}
        onmouseleave={handleCanvasMouseLeave}
        onmousedown={handleCanvasMouseDown}
        onmouseup={handleCanvasMouseUp}
    >
        <builder_platform_interaction-scoped-notification
            if:true={isSelectionMode}
            canvas-mode={canvasContext.mode}
        ></builder_platform_interaction-scoped-notification>
        <template if:true={flow}>
            <div class={flowContainerClass}>
                <builder_platform_interaction-alc-flow
                    canvas-context={canvasContext}
                    class={flow.class}
                    disable-delete-elements={disableDeleteElements}
                    disable-edit-elements={disableEditElements}
                    flow={flow.flowInfo}
                    style={flow.style}
                    onalcselectdeselectnode={handleNodeSelectionDeselection}
                    onnoderesize={handleDynamicNodeRender}
                    onmenurendered={handleMenuRendered}
                    ontogglemenu={handleToggleMenu}
                    onclosemenu={handleCloseMenu}
                    active-element-guid={activeElementGuid}
                    flow-model={flow.flowModel}
                    onincominggotostubclick={handleHighlightAllOutgoingStubs}
                    ongotopath={handleAddOrRerouteGoToItemSelection}
                    onhighlightpathstodelete={handleHighlightPathsToDelete}
                    ondeletebranchelement={handleBranchElementDeletion}
                    ondeleteelement={handleDeleteElement}
                    onclearhighlightedpath={handleClearHighlightedPath}
                >
                </builder_platform_interaction-alc-flow>
            </div>
        </template>
    </div>
    <builder_platform_interaction-zoom-panel
        style={zoomPanelStyle}
        is-zoom-in-disabled={isZoomInDisabled}
        is-zoom-out-disabled={isZoomOutDisabled}
        onclicktozoom={handleZoomAction}
    ></builder_platform_interaction-zoom-panel>
    <!-- <builder_platform_interaction-field-input> </builder_platform_interaction-field-input> -->
</template>
