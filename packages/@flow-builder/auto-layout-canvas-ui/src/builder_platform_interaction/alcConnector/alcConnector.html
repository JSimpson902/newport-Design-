<template>
    <!-- Connector SVG -->
    <svg class={svgClassName} height={svgInfo.height} width={svgInfo.width} style={svgInfo.style}>
        <g>
            <path d={svgInfo.path}></path>
        </g>
    </svg>

    <!-- Connector Label -->
    <div if:true={hasConnectorBadge} class={connectorBadgeClass} style={connectorLabelStyle}>
        <span class="slds-truncate">{connectorBadgeLabel}</span>
    </div>

    <!-- "+" Button Menu -->
    <template if:true={showAddElementButton}>
        <builder_platform_interaction-focus-trap
            enabled={menu}
            style={menuTriggerContainerStyle}
            class={menuTriggerContainerClass}
        >
            <builder_platform_interaction-alc-menu-trigger
                icon-size="small"
                source={connectorInfo.source}
                menu-opened={menu}
                canvas-mode={canvasContext.mode}
                variant={menuTriggerVariant}
                aria-haspopup="dialog"
                aria-label={addButtonLabel}
                connector-aria-info={connectorAriaInfo}
                disabled={isDisabled}
            >
                <div slot="trigger">
                    <!-- Uses css to show and hide the different icons in Cut mode-->
                    <lightning-icon
                        alternative-text={addButtonLabel}
                        class={addIconClasses}
                        icon-name="utility:add"
                        size="x-small"
                        title={addButtonLabel}
                        variant={addIconVariant}
                    ></lightning-icon>
                    <lightning-icon
                        if:true={isCutModeEnabled}
                        alternative-text={labels.pasteElementIconAltText}
                        class="secondary-paste-icon slds-var-m-around_small"
                        icon-name="utility:paste"
                        size="x-small"
                        title={labels.pasteElementIconAltText}
                        variant={addIconVariant}
                    ></lightning-icon>
                </div>
            </builder_platform_interaction-alc-menu-trigger>
            <x-lazy
                if:true={menu}
                lwc:dynamic={menu.ctor}
                source={menu.source}
                class="menu"
                auto-focus={menu.autoFocus}
                metadata={menu.metadata}
                can-add-goto={menu.canAddGoto}
                elements-metadata={menu.elementsMetadata}
                can-add-end-element={menu.canAddEndElement}
                is-go-to-connector={menu.isGoToConnector}
                num-paste-elements-available={menu.numPasteElementsAvailable}
            ></x-lazy>
        </builder_platform_interaction-focus-trap>
    </template>

    <!-- GoTo Target Label -->
    <a
        if:true={isGoToConnector}
        href="#"
        class={goToTargetClass}
        style={goToTargetLabelStyle}
        title={goToTargetLabel}
        onclick={handleOutgoingStubClick}
    >
        <div class="slds-m-right_xx-small slds-truncate go-to-target-label">
            <span>{goToTargetLabel}</span>
        </div>
        <span>&#x2192;</span>
    </a>
</template>
