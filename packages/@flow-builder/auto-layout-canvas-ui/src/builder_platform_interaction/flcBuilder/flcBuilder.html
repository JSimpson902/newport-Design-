<template>
    <div class="canvas" onclick={handleCanvasClick} ontogglemenu={handleToggleMenu}>
        <template if:true={flow}>
            <div class="flow-container">
                <builder_platform_interaction-flc-flow
                    style={flow.style}
                    class={flow.class}
                    flow={flow.flowInfo}
                    is-canvas-ready={isCanvasReady}
                    is-paste-available={isPasteAvailable}
                    is-selection-mode={isSelectionMode}
                    is-reconnecting={isReconnecting}
                    onflcselectdeselectnode={handleNodeSelectionDeselection}
                >
                </builder_platform_interaction-flc-flow>

                <template if:true={showConnectorMenu}>
                    <builder_platform_interaction-flc-connector-menu
                        class="menu"
                        style={menu.style}
                        prev={menu.prev}
                        next={menu.next}
                        parent={menu.parent}
                        can-merge-ended-branch={menu.canMergeEndedBranch}
                        has-end-element={menu.hasEndElement}
                        child-index={menu.childIndex}
                        is-paste-available={isPasteAvailable}
                        elements-metadata={menu.elementsMetadata}
                        onmergewithexistingpath={handleMergeWithExistingPath}
                    ></builder_platform_interaction-flc-connector-menu>
                </template>
                <template if:true={showNodeMenu}>
                    <builder_platform_interaction-flc-node-menu
                        if:false={isStart}
                        class="menu"
                        condition-options={menu.conditionOptionsForNode}
                        element-has-fault={menu.elementHasFault}
                        element-metadata={menu.elementMetadata}
                        guid={menu.guid}
                        style={menu.style}
                        onhighlightpathstodelete={handleHighlightPathsToDelete}
                    ></builder_platform_interaction-flc-node-menu>
                    <builder_platform_interaction-flc-node-start-menu
                        if:true={isStart}
                        class="menu"
                        condition-options={menu.conditionOptionsForNode}
                        element-has-fault={menu.elementHasFault}
                        element-metadata={menu.elementMetadata}
                        element-data={elementMetadata}
                        guid={menu.guid}
                        style={menu.style}
                        onhighlightpathstodelete={handleHighlightPathsToDelete}
                    ></builder_platform_interaction-flc-node-start-menu>
                </template>
            </div>
        </template>
    </div>
    <builder_platform_interaction-zoom-panel
        is-zoom-in-disabled={isZoomInDisabled}
        is-zoom-out-disabled={isZoomOutDisabled}
        is-zoom-to-view={isZoomToView}
        onclicktozoom={handleZoomAction}
    ></builder_platform_interaction-zoom-panel>
</template>
