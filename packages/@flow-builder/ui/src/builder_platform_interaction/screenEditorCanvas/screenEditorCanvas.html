<template>
    <span aria-live="assertive" class="aria-live-instruction">{ariaLiveInstruction}</span>
    <span aria-live="polite" class="aria-live-instruction">{ariaDescription}</span>
    <div
        if:true={screen}
        class="slds-p-around_small screen-editor-canvas-container slds-scrollable"
        onclick={handleOnClick}
        onscroll={handleScroll}
        onscreenelementkeyboardinteraction={handleScreenElementKeyboardInteraction}
        onscreenelementselected={handleScreenElementSelected}
    >
        <div class="slds-grow screen-editor-canvas-content slds-p-top_small slds-grid">
            <div class="slds-card slds-card_boundary slds-grow slds-grid slds-grid_vertical">
                <!--  header -->
                <builder_platform_interaction-screen-editor-highlight
                    if:true={screen.showHeader}
                    screen-element={screen}
                    property="showHeader"
                    prevent-events="true"
                    title={labels.header}
                    selected={headerSelected}
                >
                    <div
                        if:false={screenConfigurationHasErrors}
                        slot="screen-element"
                        class="slds-grid slds-grow"
                        aria-label={screenTitle}
                    >
                        <!-- Screen config is fine -->
                        <div class="slds-card__header slds-grid slds-grow slds-border_bottom">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate slds-p-bottom_small">
                                <div class="slds-media__body">
                                    <h2>
                                        <span class="slds-card__header-link slds-text-heading_small"
                                            >{screenTitle}</span
                                        >
                                    </h2>
                                </div>
                            </header>
                            <div if:true={hasHelpText} class="slds-no-flex">
                                <lightning-button-icon
                                    icon-name="utility:info"
                                    variant="bare"
                                    alternative-text={labels.buttonHelpTextAltText}
                                    size="small"
                                ></lightning-button-icon>
                            </div>
                        </div>
                    </div>
                    <div if:true={screenConfigurationHasErrors} slot="screen-element" class="slds-grid slds-grow">
                        <!-- Screen config has errors -->
                        <div class="slds-grow slds-border_bottom">
                            <builder_platform_interaction-screen-field-card
                                class="slds-grow"
                                title={labels.invalidScreen}
                                error
                            >
                            </builder_platform_interaction-screen-field-card>
                        </div>
                    </div>
                </builder_platform_interaction-screen-editor-highlight>

                <!--  body -->
                <builder_platform_interaction-screen-canvas
                    class="slds-m-top_small"
                    element={screen}
                    selected-item-guid={selectedItemGuid}
                    show-empty-placeholder="false"
                    moved-item-guid={movedItemGuid}
                >
                </builder_platform_interaction-screen-canvas>

                <!--  footer -->
                <builder_platform_interaction-screen-editor-highlight
                    if:true={screen.showFooter}
                    screen-element={screen}
                    property="showFooter"
                    prevent-events="true"
                    title={labels.footer}
                    selected={footerSelected}
                >
                    <div
                        slot="screen-element"
                        class="screen-editor-canvas-footer slds-card__footer slds-grid slds-border_top slds-grow"
                    >
                        <button
                            if:true={showPause}
                            class="slds-button slds-button--neutral test-pause-btn slds-m-right_xx-small"
                            type="button"
                            tabindex="-1"
                        >
                            {pauseButtonText}
                        </button>
                        <div class="slds-col_bump-left slds-grid">
                            <button
                                if:true={showBack}
                                class="slds-button slds-button--neutral test-back-btn"
                                type="button"
                                tabindex="-1"
                            >
                                {backButtonText}
                            </button>
                            <button
                                if:true={showNextOrFinish}
                                class="slds-button slds-button--brand test-next-or-finish-btn"
                                type="button"
                                tabindex="-1"
                            >
                                {nextOrFinishButtonText}
                            </button>
                        </div>
                    </div>
                </builder_platform_interaction-screen-editor-highlight>
            </div>
        </div>
    </div>
</template>
