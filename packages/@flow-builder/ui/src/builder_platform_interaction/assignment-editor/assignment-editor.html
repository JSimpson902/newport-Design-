<template>
    <!-- Accordion will be put in place after talking to the global components team, probably by the end of 216
    Created our own poor man's accordion for now :)
    -->
    <div if:true={assignmentElement}>
        <builder_platform_interaction-accordion>
            <builder_platform_interaction-accordion-section>
                <div slot="accordion-header">{labels.detailsSectionHeader}</div>
                <div slot="accordion-body">
                    <div class="slds-m-bottom--x-small">{labels.detailsSectionDescription}</div>
                    <!-- Name Label Desc Component -->
                    <builder_platform_interaction-label-description label={assignmentElement.label} dev-name={assignmentElement.name} description={assignmentElement.description} onpropertychanged={handleEvent}> </builder_platform_interaction-label-description>
                </div>
            </builder_platform_interaction-accordion-section>
        </builder_platform_interaction-accordion>
        <div class="slds-m-bottom_small slds-border_top">
            <h3 class="slds-text-heading_small slds-p-around_small">{labels.assignmentsSectionHeader}</h3>
            <div class="slds-p-horizontal_small">
                <builder_platform_interaction-list items={assignmentElement.assignmentItems}
                                                   onaddlistitem={handleEvent}
                                                   onupdatelistitem={handleEvent}
                                                   ondeletelistitem={handleEvent}
                                                   add-label={labels.addButtonLabel}>
                    <template for:each={assignmentElement.assignmentItems} for:item="item" for:index="itemIndex" slot="listBody">
                        <div class="slds-list__item slds-is-relative" key={item.rowIndex}>
                            <builder_platform_interaction-row item-index={itemIndex} show-delete={showDelete}>
                                    <div slot="rowBody">
                                        <builder_platform_interaction-expression-builder configuration={expressionBuilderConfig} expression={item} show-operator=true lhs-label={labels.lhsLabel} operator-label={labels.operatorLabel} rhs-label={labels.rhsLabel}></builder_platform_interaction-expression-builder>
                                    </div>
                            </builder_platform_interaction-row>
                        </div>
                    </template>
                </builder_platform_interaction-list>
            </div>
        </div>
    </div>
</template>
