<template>
    <div class="slds-p-horizontal_small slds-p-top_x-small">
        <table class="slds-table slds-no-row-hover slds-table_header-hidden slds-table_fixed-layout">
            <template for:each={displayedFields} for:item="field">
                <tr key={field.key} class={field.key}>
                    <td class="slds-align-top slds-cell-wrap slds-size_1-of-3">
                        <lightning-formatted-text
                            value={field.label}
                            class="autofield-description-label"
                        ></lightning-formatted-text>
                    </td>
                    <td class="slds-align-top slds-cell-wrap">
                        <lightning-formatted-text
                            value={field.value}
                            class="autofield-description-value"
                        ></lightning-formatted-text>
                    </td>
                </tr>
            </template>
            <tr if:true={helptext}>
                <td class="slds-align-top slds-cell-wrap slds-size_1-of-3">
                    <lightning-formatted-text
                        value={labels.automaticFieldHelptext}
                        class="autofield-description-label"
                    ></lightning-formatted-text>
                </td>
                <td class="slds-align-top slds-cell-wrap">
                    <lightning-helptext content={helptext}></lightning-helptext>
                </td>
            </tr>
        </table>
    </div>

    <template if:true={isRecordTypeBasedPicklist}>
        <builder_platform_interaction-screen-picklist-more-details-card
            popup-trigger-label={labels.automaticFieldPicklistMoreDetailsLinkLabel}
            side-text={labels.automaticFieldPicklistSideText}
            popup-text={labels.automaticFieldPicklistMoreDetailsPopupText}
        ></builder_platform_interaction-screen-picklist-more-details-card>
    </template>

    <div class="slds-p-around_medium">
        <div class="slds-p-horizontal_x-small slds-p-top_x-small slds-grid infobox">
            <div class="slds-col slds-p-right_x-small">
                <lightning-icon icon-name="utility:info_alt" size="small"></lightning-icon>
            </div>
            <div class="slds-col">
                <p>
                    <lightning-formatted-text
                        value={labels.automaticFieldInfoboxText}
                        class="slds-p-bottom_x-small"
                    ></lightning-formatted-text>
                </p>
                <p>
                    <lightning-formatted-url
                        value={objectManagerLink}
                        label={labels.automaticFieldInfoboxLink}
                        target="_blank"
                    ></lightning-formatted-url>
                </p>
            </div>
        </div>
    </div>
    <div>
        <lightning-accordion
            allow-multiple-sections-open
            active-section-name={expandedSectionNames}
            class="slds-has-divider slds-p-top_none"
        >
            <builder_platform_interaction-screen-component-visibility-section
                field={field}
                accordion-section-label={labels.automaticFieldVisibilitySectionTitle}
                visibility-logic-combobox-label={visibilityLogicComboboxLabel}
            >
            </builder_platform_interaction-screen-component-visibility-section>
        </lightning-accordion>
    </div>
</template>
