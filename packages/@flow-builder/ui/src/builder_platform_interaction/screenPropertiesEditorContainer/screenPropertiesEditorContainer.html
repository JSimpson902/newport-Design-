<template>
    <div class='properties-container full-height slds-panel slds-no-flex slds-panel_drawer slds-panel_docked-right slds-border_left slds-grid slds-grid_vertical slds-size_medium toggle-animated' aria-hidden='false' >
        <div class='slds-panel__header slds-shrink-none -slds-border_bottom-none slds-grid'>
            <div class='slds-grow'>
                <h2 class='slds-panel__header-title slds-text-heading_small'>
                    <span if:true={isScreen}>{labels.screenProperties}</span>
                    <span if:false={isScreen}>
                        <lightning-button-icon icon-name='utility:back' size='medium' variant='bare' class='slds-list_inline'
                                   title={labels.screenProperties} onclick={handleScreenSelection}>
                        </lightning-button-icon>
                        <span class='slds-p-left_small'>{node.type.label}</span>
                    </span>
                </h2>
            </div>

            <lightning-button-icon if:true={hasErrors} class="slds-p-right_x-small" icon-name='utility:error' 
                                                       icon-class='slds-icon-text-error' size='medium' 
                                                       variant='bare' title={labels.errorIconTitle}>
            </lightning-button-icon>
            <lightning-button-icon icon-name={toggleIconName} size='medium' variant='bare' 
                                   title={labels.togglePropertiesPanelTitle} onclick={handleToggleExpand}>
            </lightning-button-icon>
        </div>
        
        <div if:true={displaySpinner} class='slds-is-relative full-height slds-shrink'>
            <lightning-spinner alternative-text={labels.spinnerAlternativeText} size='medium' variant='brand' class='spinner'></lightning-spinner>
        </div>
        
        <div if:false={displaySpinner} class='slds-panel__body slds-scrollable_y slds-p-around_none slds-grid slds-grid_vertical slds-grow full-height'>
            <builder_platform_interaction-screen-properties-editor if:true={isScreen} 
                                                                   class='properties-editor-panel' 
                                                                   screen={node}>
            </builder_platform_interaction-screen-properties-editor>

            <builder_platform_interaction-screen-extension-properties-editor if:true={isExtensionField}
                                                                             class='full-height properties-editor-panel' 
                                                                             field={node}
                                                                             extension-description={extendedInfo}>
            </builder_platform_interaction-screen-extension-properties-editor>

            <builder_platform_interaction-screen-display-text-field-properties-editor if:true={isDisplayField}
                                                                   class='full-height properties-editor-panel' 
                                                                   field={node}>
            </builder_platform_interaction-screen-display-text-field-properties-editor>

            <builder_platform_interaction-screen-input-field-properties-editor if:true={isInputField}
                                                                   class='full-height properties-editor-panel'
                                                                   field={node}>
            </builder_platform_interaction-screen-input-field-properties-editor>
            
            <builder_platform_interaction-screen-textarea-field-properties-editor if:true={isTextAreaField}
                                                                   class='full-height properties-editor-panel'
                                                                   field={node}>
            </builder_platform_interaction-screen-textarea-field-properties-editor>
            
            <builder_platform_interaction-screen-password-field-properties-editor if:true={isPasswordField}
                                                                   class='full-height properties-editor-panel'
                                                                   field={node}>
            </builder_platform_interaction-screen-password-field-properties-editor>
            
            <builder_platform_interaction-screen-radio-field-properties-editor if:true={isRadioField}
                                                                   class='full-height properties-editor-panel'
                                                                   field={node}>
            </builder_platform_interaction-screen-radio-field-properties-editor>

            <div if:true={isOther} class='properties-editor-panel'>Screen field property editor (TBI)</div>
        </div>
    </div>
</template>