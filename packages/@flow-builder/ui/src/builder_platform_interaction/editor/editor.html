<template>
    <div if:true={showSpinner} class="slds-spinner_container">
        <lightning-spinner variant="brand" alternative-text={spinnerAlternativeText}></lightning-spinner>
    </div>
    <div class="slds-grid slds-grid_vertical slds-is-fixed slds-grid_frame">
        <div class="slds-builder-header_container slds-is-relative">
            <builder_platform_interaction-header flow-name={appState.properties.label} flow-version={appState.properties.versionNumber} help-url={helpUrl} back-url={backUrl}></builder_platform_interaction-header>
            <builder_platform_interaction-toolbar oneditflowproperties={handleEditFlowProperties} onrunflow={handleRunFlow} ondebugflow={handleDebugFlow} onsaveas={handleSaveFlow} onsave={handleSaveFlow} ondiffflow={handleDiffFlow}
                flow-errors-and-warnings={flowErrorsAndWarnings} save-status={saveStatus} last-modified-date={appState.properties.lastModifiedDate} flow-status={appState.properties.status} is-edit-flow-properties-disabled={hasNotBeenSaved} is-run-debug-disabled={isRunDebugDisabled} is-save-disabled={disableSave}
                is-save-as-disabled={hasNotBeenSaved} is-lightning-flow-builder={appState.properties.isLightningFlowBuilder} can-only-save-as-new-definition={appState.properties.canOnlySaveAsNewDefinition} has-unsaved-changes={appState.properties.hasUnsavedChanges}></builder_platform_interaction-toolbar>
        </div>
        <div class="slds-col slds-grow slds-grid">
            <builder_platform_interaction-left-panel onaddnewresource={handleAddResourceElement} onaddelement={handleAddCanvasElement} oneditelement={handleEditElement} ondeleteelement={handleElementDelete}></builder_platform_interaction-left-panel>
            <div class="slds-col">
                <builder_platform_interaction-canvas if:true={shouldCreateCanvas} nodes={appState.canvas.nodes} connectors={appState.canvas.connectors}
                    oncanvasmouseup={handleElementDeselection} oneditelement={handleEditElement} onnodeselected={handleNodeSelection}
                    ondragnodestop={handleDragNodeStop} ondeleteelement={handleElementDelete}
                    onaddconnection={handleAddConnection} onconnectorselected={handleConnectorSelection} onaddelement={handleAddCanvasElement}>
                </builder_platform_interaction-canvas>
            </div>
        </div>
    </div>
</template>
