<template>
    <div class="slds-builder-toolbar" role="toolbar">
        <!--Left Hand Side -->
        <!--TODO: Uncomment sections as we work on them-->

        <!-- Select Button in FLC -->
        <lightning-button
            if:true={useFixedLayoutCanvas}
            class="test-toolbar-select slds-m-right_xx-small"
            icon-name="utility:multi_select_checkbox"
            label={labels.selectLabel}
            title={labels.selectTitle}
            variant={selectButtonVariant}
            onclick={handleSelectButtonClick}
        >
        </lightning-button>

        <!-- Undo/Redo -->
        <h2 class="slds-assistive-text">{labels.assistiveName}</h2>
        <lightning-button-group if:false={isSelectionMode} class="test-undo-redo slds-builder-toolbar__item-group">
            <lightning-button-icon
                variant="border-filled"
                icon-name="utility:undo"
                disabled={isUndoDisabled}
                onclick={handleUndo}
                title={labels.undoTitle}
                alternative-text={labels.undoTitle}
            >
            </lightning-button-icon>
            <lightning-button-icon
                variant="border-filled"
                icon-name="utility:redo"
                disabled={isRedoDisabled}
                onclick={handleRedo}
                title={labels.redoTitle}
                alternative-text={labels.undoTitle}
            >
            </lightning-button-icon>
        </lightning-button-group>

        <!-- Cut/Copy in FLC -->
        <!-- <lightning-button-group if:true={isSelectionMode} class="slds-builder-toolbar__item-group"> -->
        <!-- TODO: Enable Cut button back when we add support for Cutting of multiple elements -->
        <!-- <lightning-button-icon
                alternative-text={labels.cutAltText}
                class="test-toolbar-cut"
                disabled={isCutCopyDisabled}
                icon-name="utility:cut"
                title={labels.cutTitle}
                variant="border-filled"
            >
            </lightning-button-icon> -->
        <lightning-button-icon
            if:true={isSelectionMode}
            alternative-text={labels.copyAltText}
            class="slds-builder-toolbar__item-group test-toolbar-copy"
            disabled={isCutCopyDisabled}
            icon-name="utility:copy_to_clipboard"
            title={labels.copyTitle}
            variant="border-filled"
            onclick={handleCopyButtonClick}
        >
        </lightning-button-icon>
        <!-- </lightning-button-group> -->

        <!-- Duplicate(Copy/Paste) -->
        <lightning-button-icon
            if:false={useFixedLayoutCanvas}
            variant="border-filled"
            icon-name="utility:copy"
            title={labels.duplicateTitle}
            alternative-text={labels.duplicateTitle}
            onclick={handleDuplicateButtonClick}
            class="slds-builder-toolbar__item-group test-toolbar-duplicate"
        >
        </lightning-button-icon>

        <!-- Toggle Left Panel -->
        <!--<div class="slds-builder-toolbar__item-group">-->
        <!--<lightning-button-icon-stateful variant="border-filled" icon-name="utility:toggle_panel_left" title="Toggle Left Panel" alternative-text="Toggle Left Panel">-->
        <!--</lightning-button-icon-stateful>-->
        <!--</div>-->

        <!-- Flow Properties -->
        <lightning-button-icon
            variant="border-filled"
            icon-name="utility:settings"
            alternative-text={labels.flowPropertiesTitle}
            onclick={handleEditFlowProperties}
            disabled={isEditFlowPropertiesDisabled}
            class="slds-builder-toolbar__item-group test-toolbar-editflowproperties"
        >
        </lightning-button-icon>

        <!-- Right Hand Side -->
        <div class="slds-builder-toolbar__actions">
            <div
                class="inline-display slds-p-right_medium slds-is-relative canvas-mode-toggle"
                if:true={useFixedLayoutCanvas}
            >
                <lightning-input
                    type="toggle"
                    label={labels.canvasModeToggleLabel}
                    message-toggle-active=""
                    message-toggle-inactive=""
                    checked={useFixedLayoutCanvas}
                    onchange={handleToggleCanvasMode}
                ></lightning-input>
                <div
                    class="slds-popover slds-popover_tooltip slds-nubbin_top slds-is-absolute canvas-mode-toggle-tooltip"
                    role="tooltip"
                >
                    <div class="slds-popover__body">{labels.canvasModeToggleTooltip}</div>
                </div>
            </div>
            <button
                if:true={showLastSavedPill}
                class="slds-button test-toolbar-last-saved"
                title={statusIndicatorTitle}
            >
                <span if:true={isDoingOperation}>{toolbarStatus}</span>
                <span if:true={isDoingOperation} style="padding-left: 5px;" aria-hidden>
                    <div class="slds-spinner slds-spinner_x-small slds-spinner_brand slds-is-relative">
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div>
                </span>
                <span if:true={isDoneOperation}
                    >{toolbarStatus}&nbsp;<lightning-relative-date-time
                        value={currentDate}
                    ></lightning-relative-date-time
                ></span>
            </button>

            <div class="inline-display slds-m-left_xx-small">
                <builder_platform_interaction-toolbar-status-icons flow-errors-and-warnings={flowErrorsAndWarnings}>
                </builder_platform_interaction-toolbar-status-icons>
            </div>
            <lightning-button-group class="slds-m-left_xx-small">
                <lightning-button
                    label={labels.runTitle}
                    title={labels.runTitle}
                    onclick={handleRun}
                    disabled={isRunDebugDisabled}
                >
                </lightning-button>
                <lightning-button
                    label={labels.debugTitle}
                    title={labels.debugTitle}
                    onclick={handleDebug}
                    disabled={isRunDebugDisabled}
                >
                </lightning-button>
                <lightning-button
                    if:true={isNewDebugSupported}
                    label="NewDebug"
                    title="NewDebug"
                    onclick={handleNewDebug}
                    disabled={isRunDebugDisabled}
                >
                </lightning-button>
                <lightning-button
                    if:true={isDiffFlowAllowed}
                    label={labels.diffFlowTitle}
                    title={labels.diffFlowTitle}
                    onclick={handleDiff}
                >
                </lightning-button>
            </lightning-button-group>

            <lightning-button
                id="toggleFlowStatusButton"
                label={activateButtonText}
                title={activateButtonText}
                onclick={handleToggleFlowStatus}
                disabled={activateDisabled}
                variant={activateButtonVariant}
                class="test-toolbar-activate slds-m-left_xx-small"
            >
            </lightning-button>

            <lightning-button
                label={labels.saveAsTitle}
                title={labels.saveAsTitle}
                onclick={handleSaveAs}
                disabled={isSaveAsDisabled}
                class="test-toolbar-saveas slds-m-left_xx-small"
            >
            </lightning-button>
            <lightning-button
                label={labels.saveTitle}
                variant="brand"
                title={labels.saveTitle}
                onclick={handleSave}
                disabled={saveDisabled}
                class="test-toolbar-save slds-m-left_xx-small"
            >
            </lightning-button>
        </div>
    </div>
</template>
