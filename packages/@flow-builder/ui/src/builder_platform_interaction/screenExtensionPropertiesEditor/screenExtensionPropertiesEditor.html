<template>
    <div if:true={field} class="container full-height">
        <div if:true={extensionDescription}>
            <section class="slds-p-horizontal_small slds-p-bottom_small">
                <builder_platform_interaction-screen-property-field
                    label={labels.apiNameLabel}
                    name="name"
                    required="required"
                    type="string"
                    value={field.name}
                >
                </builder_platform_interaction-screen-property-field>

                <template
                    for:each={inputParameters}
                    for:item="param"
                    for:index="index"
                >
                    <builder_platform_interaction-screen-extension-attribute-editor
                        key={param.descriptor.apiName}
                        row-index={param.rowIndex}
                        index="-1"
                        descriptor={param.descriptor}
                        attribute={param.attribute}
                        attribute-type="input"
                    >
                    </builder_platform_interaction-screen-extension-attribute-editor>
                </template>
            </section>

            <lightning-accordion
                if:true={hasOutputs}
                allow-multiple-sections-open
                active-section-name="outputsSection"
                class="slds-has-divider slds-p-top_none"
            >
                <lightning-accordion-section
                    name="componentVisibility"
                    label={labels.componentVisbilitySectionTitle}
                >
                    <builder_platform_interaction-component-visibility
                        visibility-rule={field.visibilityRule}
                        guid={field.guid}
                    >
                    </builder_platform_interaction-component-visibility>
                </lightning-accordion-section>

                <div if:true={isAutomaticOutputHandlingSupported}>
                    <builder_platform_interaction-use-advanced-options-checkbox
                        is-advanced-mode={isAdvancedMode}
                        onuseadvancedoptionsselectionchanged={handleAdvancedOptionsSelectionChange}
                    >
                    </builder_platform_interaction-use-advanced-options-checkbox>
                </div>

                <!--  validation text -->
                <lightning-accordion-section
                    if:true={isDisplayManualOutput}
                    name="outputsSection"
                    label={labels.extensionOutputsHeader}
                >
                    <template
                        for:each={state.editor.outputParameters}
                        for:item="param"
                        for:index="index"
                    >
                        <builder_platform_interaction-screen-extension-attribute-editor
                            key={param.key}
                            row-index={param.rowIndex}
                            index={index}
                            descriptor={param.descriptor}
                            attribute={param.attribute}
                            attribute-index={param.index}
                            attribute-type="output"
                        >
                        </builder_platform_interaction-screen-extension-attribute-editor>
                    </template>
                </lightning-accordion-section>
            </lightning-accordion>
        </div>
    </div>
</template>
