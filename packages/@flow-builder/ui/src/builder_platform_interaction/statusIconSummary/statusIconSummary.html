<template>
    <section
        class={sectionStyle}
        role="dialog"
        aria-labelledby="dialog-heading-id-1"
        aria-describedby="dialog-body-id-2"
    >
        <button
            class="
                slds-button slds-button_icon slds-button_icon-small
                slds-float_right
                slds-popover__close
                slds-button_icon-inverse
            "
            title={labels.closePanelButtonTitle}
            onclick={handleCloseButtonClick}
        >
            <lightning-icon variant="inverse" icon-name="utility:close" size="x-small"> </lightning-icon>
        </button>

        <header class="slds-popover__header">
            <div class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <lightning-icon icon-name={iconNameForHeader} variant="inverse" size="x-small"> </lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-1" title={header}>
                        {header}
                    </h2>
                </div>
            </div>
        </header>
        <div class="slds-popover__body slds-popover__body_scrollable slds-p-around_none" id="dialog-body-id-2">
            <ul class="slds-has-dividers_bottom-space">
                <li if:true={showTotalCounts} class="slds-item">{messageBody}</li>
                <template if:false={showOnlyNumberOfErrors} for:each={sections} for:item="section">
                    <li key={section.guid} if:true={hasSectionHeader} class="slds-item">
                        {section.title} ({section.messages.length})
                    </li>
                    <li key={section.guid} if:true={hasSectionHeader} class="slds-p-around_x-small">
                        {section.sectionInfo}
                    </li>
                    <li key={section.guid} class={hasSections}>
                        <ul key={section.guid} class={hasSectionItems}>
                            <template for:each={section.messages} for:item="info">
                                <builder_platform_interaction-clickable-error-message key={info.guid} info={info}>
                                </builder_platform_interaction-clickable-error-message>
                            </template>
                        </ul>
                    </li>
                </template>
            </ul>
        </div>
    </section>
</template>
