<template>
    <div class={calculatedClass}>
        <div if:true={hasErrors}>
            <builder_platform_interaction-screen-field-card title={labels.invalidScreenfield} text={displayName} error>
            </builder_platform_interaction-screen-field-card>
        </div>
        <div if:false={hasErrors}>
            <div if:true={isExtension}>
                <builder_platform_interaction-screen-extension-field
                    if:true={isDisplayComponentPreview}
                    attributes={componentInstanceAttributes}
                    descriptor={screenfield.type.name}
                    name={screenfield.type.name}
                    ondummypreviewmode={handleDummyModeChange}
                    onerror={handleError}
                >
                </builder_platform_interaction-screen-extension-field>

                <builder_platform_interaction-screen-field-card
                    if:false={isDisplayComponentPreview}
                    icon={screenfield.type.icon}
                    title={displayName}
                    text={labels.fieldExtensionPreviewDescription}
                >
                </builder_platform_interaction-screen-field-card>
            </div>

            <builder_platform_interaction-screen-input-field
                if:true={isInputFieldType}
                type-name={screenfield.type.name}
                label={fieldText}
                value={defaultValue}
                value-type={screenfield.defaultValueDataType}
                help-text={screenfield.helpText}
                required={isRequired}
            >
            </builder_platform_interaction-screen-input-field>
            <builder_platform_interaction-screen-display-text-field
                if:true={isDisplayTextType}
                type-name={screenfield.type.name}
                title={name}
                value={fieldText}
            >
            </builder_platform_interaction-screen-display-text-field>
            <builder_platform_interaction-screen-section-field
                if:true={isSectionType}
                type-name={screenfield.type.name}
                title={name}
                section={screenfield}
                selected-item-guid={selectedItemGuid}
            >
            </builder_platform_interaction-screen-section-field>
            <builder_platform_interaction-screen-textarea-field
                if:true={isTextAreaType}
                label={fieldText}
                value={defaultValue}
                help-text={screenfield.helpText}
                required={screenfield.isRequired}
            >
            </builder_platform_interaction-screen-textarea-field>
            <builder_platform_interaction-screen-choice-field
                if:true={isChoiceField}
                label={fieldText}
                field={screenfield}
            >
            </builder_platform_interaction-screen-choice-field>
        </div>
    </div>
</template>
