<template>
    <div class="property-input slds-form-element">
        <div class="slds-grid slds-grid_vertical">
            <div class="slds-col slds-order_1 slds-size_1-of-2">
                <span
                    id="resourcedRichTextEditorLabel"
                    class="slds-form-element__label"
                >
                    <abbr
                        if:true={isRequired}
                        title={labels.inputRequiredTitle}
                        class="slds-required"
                        >*</abbr
                    >
                    {label}
                </span>
                <lightning-helptext
                    if:true={helpText}
                    class="slds-form-element"
                    content={helpText}
                ></lightning-helptext>
            </div>
            <div class="slds-col slds-order_2 slds-size_1-of-2">
                <lightning-input
                    if:true={plainTextAvailable}
                    type="toggle"
                    label={labels.togglePlainTextTitle}
                    message-toggle-active={labels.togglePlainTextActive}
                    message-toggle-inactive={labels.togglePlainTextInactive}
                    onchange={handleTogglePlainTextChanged}
                >
                </lightning-input>
            </div>
        </div>
        <div class={classList} aria-labelledby="resourcedRichTextEditorLabel">
            <div if:false={isPlainTextMode}>
                <div class="slds-p-around_x-small slds-p-bottom_xx-small">
                    <builder_platform_interaction-ferov-resource-picker
                        combobox-config={resourceComboBoxConfig}
                        element-config={elementConfig}
                        hide-global-constants
                        show-global-variables={showGlobalVariables}
                        hide-new-resource={hideNewResource}
                        onfocusout={handleResourcePickerFocusout}
                        onitemselected={handleResourcePickerSelection}
                        onnewinlineresource={handleNewInlineResource}
                    >
                    </builder_platform_interaction-ferov-resource-picker>
                </div>
                <lightning-input-rich-text
                    formats={formats}
                    value={inputRichTextValue}
                    variant="bottom-toolbar"
                    onchange={handleChangeEvent}
                    onblur={handleBlurEvent}
                >
                </lightning-input-rich-text>
            </div>
            <div if:true={isPlainTextMode}>
                <builder_platform_interaction-resourced-textarea
                    value={inputRichTextValue}
                    hide-new-resource={hideNewResource}
                >
                </builder_platform_interaction-resourced-textarea>
            </div>
        </div>
        <div if:true={state.error} class="slds-has-error">
            <div role="alert" class="slds-form-element__help">
                {state.error}
            </div>
        </div>
    </div>
</template>
