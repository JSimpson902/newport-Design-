<template>
    <div class="property-input slds-form-element">
        <div class="slds-grid slds-grid_vertical">
            <div class="slds-col slds-order_1 slds-size_1-of-1">
                <span id="resourcedRichTextEditorLabel" class="slds-form-element__label">
                    <abbr if:true={isRequired} title={labels.inputRequiredTitle} class="slds-required">*</abbr>
                    {label}
                </span>
                <lightning-helptext
                    if:true={helpText}
                    class="slds-form-element"
                    content={helpText}
                ></lightning-helptext>
            </div>
        </div>
        <div class={classList} aria-labelledby="resourcedRichTextEditorLabel">
            <div if:false={isPlainTextMode}>
                <div
                    class="divParentResourcePickerModeOptions slds-p-around_x-small slds-p-bottom_xx-small slds-button-group-list"
                >
                    <div class={computedDivResourcePickerClass}>
                        <builder_platform_interaction-ferov-resource-picker
                            combobox-config={resourceComboBoxConfig}
                            element-config={elementConfig}
                            hide-global-constants
                            row-index={rowIndex}
                            hide-new-resource={hideNewResource}
                            onfocusout={handleResourcePickerFocusout}
                            onitemselected={handleResourcePickerSelection}
                            oncomboboxstatechanged={handleResourcePickerSelection}
                        >
                        </builder_platform_interaction-ferov-resource-picker>
                    </div>
                    <builder_platform_interaction-rich-text-plain-text-switch if:true={plainTextAvailable}>
                    </builder_platform_interaction-rich-text-plain-text-switch>
                </div>

                <lightning-input-rich-text
                    formats={formats}
                    value={inputRichTextValue}
                    variant="bottom-toolbar"
                    onchange={handleChangeEvent}
                    onfocus={handleFocusEvent}
                    onblur={handleBlurEvent}
                    share-with-entity-id={orgId}
                >
                </lightning-input-rich-text>
            </div>
            <div if:true={isPlainTextMode}>
                <builder_platform_interaction-resourced-textarea
                    value={state.value}
                    hide-new-resource={hideNewResource}
                    row-index={rowIndex}
                    plain-text-available
                >
                </builder_platform_interaction-resourced-textarea>
            </div>
        </div>
        <div if:true={state.error} class="slds-has-error">
            <div role="alert" class="slds-form-element__help">
                {state.error}
            </div>
        </div>
    </div>
</template>
