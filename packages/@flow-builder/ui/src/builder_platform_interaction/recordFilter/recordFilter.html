<template>
    <div class="slds-m-bottom_small slds-border_top">
        <h3 class="slds-text-heading_small slds-p-around_small">{filterRecordsTitle}</h3>
        <div class="slds-p-horizontal_small slds-form-element slds-size_1-of-2 slds-m-bottom_small">
            <lightning-combobox 
                label={filterLabel} 
                value={selectedFilter} 
                options={filterOptions} 
                onchange={handleFilterTypeChanged} 
                dropdown-alignment="auto">
            </lightning-combobox>
        </div>
        <div class="slds-p-horizontal_small slds-m-top_xx-small slds-grid slds-grid_vertical-align-center" if:true={showWarningMessage}>
            <lightning-icon icon-name="utility:warning" title={labels.warning} alternative-text={labels.warning} variant="warning" size="x-small" class="slds-m-right_xx-small"></lightning-icon>
            <builder_platform_interaction-rich-label
                label={warningLabel}
                args={resourceDisplayText}
                class="slds-m-left_xx-small slds-m-top_xx-small">
            </builder_platform_interaction-rich-label>
        </div>
        <div class="slds-p-horizontal_small ">
            <builder_platform_interaction-list if:true={showFilterList} items={filterItems} onaddlistitem={handleAddFilter} onupdatelistitem={handleUpdateFilter} ondeletelistitem={handleDeleteFilter} add-label={labels.addCriteria}>
                <div slot="listBody">
                    <template for:each={filterItems} for:item="filterItem" for:index="filterIndex">
                        <div class="slds-list__item slds-is-relative" key={filterItem.rowIndex}>
                            <builder_platform_interaction-row item-index={filterIndex} show-delete={showDeleteFilter}>
                                <div slot="rowBody">
                                    <builder_platform_interaction-field-to-ferov-expression-builder object-type={recordEntityName} rules={rules} container-element={elementType}
                                    	lhs-fields={recordFields} expression={filterItem} lhs-label={labels.filterLhsLabel} operator-label={labels.filterOperatorLabel}
                                        rhs-label={labels.filterRhsLabel} lhs-placeholder={labels.filterLhsPlaceholder} hide-new-resource={hideNewResource}
                                        operator-placeholder={labels.filterOperatorPlaceholder}></builder_platform_interaction-field-to-ferov-expression-builder>
                                </div>
                            </builder_platform_interaction-row>
                        </div>
                    </template>
                </div>
            </builder_platform_interaction-list>
        </div>
    </div>
</template>