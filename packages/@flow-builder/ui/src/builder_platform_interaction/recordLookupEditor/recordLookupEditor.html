<template>
    <div class="slds-p-horizontal_small slds-p-top_small">
        {labels.recordLookupTitle}
    </div>
    <div class="slds-p-horizontal_small slds-p-top_small">
        <builder_platform_interaction-label-description label={recordLookupElement.label} dev-name={recordLookupElement.name} description={recordLookupElement.description} guid={recordLookupElement.guid} onpropertychanged={handlePropertyOrListItemChanged}> </builder_platform_interaction-label-description>
    </div>
    
    <!-- sobject picker -->
    <div class="slds-m-bottom_small slds-border_top">
        <h3 class="slds-text-heading_small slds-p-around_small">{labels.getRecordsOfObjectType}</h3>
        <div class="slds-p-horizontal_small slds-form-element slds-size_1-of-2">
            <builder_platform_interaction-entity-resource-picker
                    combobox-config={entityComboboxConfig}
                    value={recordLookupElement.object.value}
                    crud-filter-type={crudFilterType}
                    oncomboboxstatechanged={handleResourceChanged}
                    onitemselected={handleResourceChanged}>
            </builder_platform_interaction-entity-resource-picker>
        </div>
    </div>

    <div if:true={recordEntityName}>
        <!-- Find Records section -->
        <builder_platform_interaction-record-filter element-type={recordLookupElement.elementType} filter-items={recordLookupElement.filters} record-entity-name={recordEntityName} resource-display-text={resourceDisplayText} record-fields={recordFields} filter-type={recordLookupElement.filterType.value} onrecordfiltertypechanged={handleFilterTypeChanged} onaddrecordfilter={handlePropertyOrListItemChanged} onupdaterecordfilter={handlePropertyOrListItemChanged} ondeleterecordfilter={handlePropertyOrListItemChanged}></builder_platform_interaction-record-filter>

        <!-- Sort Records section -->
        <builder_platform_interaction-record-sort
                resource-api-name={recordEntityName}
                resource-display-text={resourceDisplayText}
                selected-field={recordLookupElement.sortField.value}
                sort-order={recordLookupElement.sortOrder.value}
                sort-field-error={recordLookupElement.sortField.error}
                onchange={handleRecordSortChanged}></builder_platform_interaction-record-sort>
                
        <!-- Record Store Fields Selection section -->
        <builder_platform_interaction-record-store-options
                element-type={recordLookupElement.elementType}
                resource-display-text={resourceDisplayText}
                number-of-records-to-store={numberRecordsToStore}
                assign-null-values-if-no-records-found={recordLookupElement.assignNullValuesIfNoRecordsFound}
                onrecordstoreoptionchanged={handleRecordStoreOptionsChanged}>
        </builder_platform_interaction-record-store-options>
        <!-- SObject or SObject collection section -->
        <builder_platform_interaction-record-query-fields is-collection={isCollection} record-entity-name={recordEntityName} resource-display-text={resourceDisplayText} element-type={recordLookupElement.elementType} queried-fields={recordLookupElement.queriedFields}
                output-reference={outputReference} sobject-variable-error-message={outputReferenceErrorMessage} onsobjectreferencechanged={handleSObjectReferenceChanged} onaddrecordlookupfield={handlePropertyOrListItemChanged} onupdaterecordlookupfield={handlePropertyOrListItemChanged} ondeleterecordlookupfield={handlePropertyOrListItemChanged}></builder_platform_interaction-record-query-fields>
    </div>
</template> 
