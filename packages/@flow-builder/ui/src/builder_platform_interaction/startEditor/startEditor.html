<template>
    <div class="slds-p-horizontal_small slds-p-top_small">
        <h3 class="slds-text-heading_small slds-p-bottom_small">
            {labels.triggerTypeSectionHeader}
        </h3>
        <div class="slds-form slds-p-bottom_small slds-size_1-of-2">
            <lightning-radio-group
                class="triggerType slds-form-element slds-col slds-grow"
                name="triggerType"
                label={labels.triggerTypeInputLabel}
                onchange={handleTriggerTypeChange}
                options={triggerTypeOptions}
                value={triggerType}
                required
                type="radio"
            ></lightning-radio-group>
        </div>
        <div class="slds-p-bottom_small">
            {flowTriggerDescription}
        </div>
    </div>

    <div
        class="scheduleSection slds-border_top slds-p-around_small"
        if:true={showScheduleSection}
    >
        <h3 class="slds-text-heading_small slds-p-bottom_small">
            {labels.scheduleSectionHeader}
        </h3>

        <div class="slds-form slds-grid slds-gutters slds-gutters_xx-small">
            <lightning-input
                class="startDate slds-col slds-form-element slds-size_1-of-4"
                label={labels.startDateInputLabel}
                message-when-value-missing={labels.cannotBeBlank}
                name="startDate"
                onchange={handleStartDateChange}
                placeholder={labels.startDateInputPlaceholder}
                required
                type="date"
                value={startDate}
            ></lightning-input>

            <lightning-input
                class="startTime slds-col slds-form-element slds-size_1-of-4"
                field-level-help={startTimeInputHelp}
                label={labels.startTimeInputLabel}
                message-when-value-missing={labels.cannotBeBlank}
                name="startTime"
                onchange={handleStartTimeChange}
                placeholder={labels.startTimeInputPlaceholder}
                required
                type="time"
                value={startTime}
            ></lightning-input>
        </div>

        <lightning-combobox
            class="frequency slds-form-element slds-size_1-of-2 slds-col slds-grow"
            dropdown-alignment="auto"
            field-level-help={labels.frequencyInputHelp}
            label={labels.frequencyInputLabel}
            name="frequency"
            onchange={handleFrequencyChange}
            options={frequencyOptions}
            value={frequency}
        ></lightning-combobox>
    </div>

    <!-- choose object & record condtions -->
    <div
        if:true={showObjectSection}
        class="slds-m-bottom_small slds-border_top"
    >
        <h3 class="slds-text-heading_small slds-p-around_small">
            {triggerObjectSectionHeader}
        </h3>
        <div
            if:true={showScheduleSection}
            class="slds-text-body_small slds-text-color_weak slds-m-bottom_medium slds-p-left_small"
        >
            {labels.filterRecordsDescription}
        </div>

        <div
            if:true={showRecordCreateOrUpdate}
            class="slds-form slds-p-horizontal_small slds-p-bottom_small slds-size_1-of-2"
        >
            <lightning-radio-group
                class="recordCreateOrUpdate slds-form-element slds-col slds-grow"
                name="recordCreateOrUpdate"
                label={labels.triggerTypeBeforeSaveInputLabel}
                options={createOrUpdateOptions}
                onchange={handleTriggerSaveTypeChange}
                value={saveType}
                required
                type="radio"
            ></lightning-radio-group>
        </div>

        <div class="slds-p-horizontal_small slds-form-element slds-size_1-of-2">
            <builder_platform_interaction-entity-resource-picker
                if:true={showScheduleSection}
                combobox-config={entityComboboxConfig}
                value={startElement.object.value}
                row-index={startElement.objectIndex.value}
                crud-filter-type={crudFilterType}
                oncomboboxstatechanged={handleResourceChanged}
                onitemselected={handleResourceChanged}
            >
            </builder_platform_interaction-entity-resource-picker>

            <!-- Used for before save triggerType-->
            <builder_platform_interaction-entity-resource-picker
                if:false={showScheduleSection}
                combobox-config={entityComboboxConfigRequired}
                value={startElement.object.value}
                row-index={startElement.objectIndex.value}
                crud-filter-type={crudFilterType}
                oncomboboxstatechanged={handleResourceChanged}
                onitemselected={handleResourceChanged}
            >
            </builder_platform_interaction-entity-resource-picker>
        </div>
    </div>

    <div if:true={showRecordFilterSection}>
        <builder_platform_interaction-record-filter
            element-type={elementType}
            filter-items={startElement.filters}
            record-entity-name={recordEntityName}
            resource-display-text={resourceDisplayText}
            record-fields={recordFields}
            filter-type={startElement.filterType}
            onrecordfiltertypechanged={handleFilterTypeChanged}
            onaddrecordfilter={handlePropertyOrListItemChanged}
            onupdaterecordfilter={handlePropertyOrListItemChanged}
            ondeleterecordfilter={handlePropertyOrListItemChanged}
            hide-title
            hide-new-resource
            hide-system-variables
            show-prefix
            variant="startElement"
        >
        </builder_platform_interaction-record-filter>
    </div>
</template>
