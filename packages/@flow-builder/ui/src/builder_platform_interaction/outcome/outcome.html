<template>
    <!-- TODO: Localize labels after W-4693112 -->
    <div class="slds-grid slds-m-bottom_x-small">
        <h3 class="slds-text-title_caps">
            <span class="slds-truncate">Outcome Details</span>
        </h3>
        <lightning-button if:true={showDelete} label="Remove" title="Remove Outcome"
                          class="slds-col_bump-left slds-shrink-none removeOutcome"
                          onclick={handleDelete}>
        </lightning-button>
    </div>
    <builder_platform_interaction-label-description
            label={outcome.label}
            dev-name-label="Outcome API Name"
            dev-name={outcome.name}
            onpropertychanged={handlePropertyChanged}
            hide-description=true>
    </builder_platform_interaction-label-description>

    <!-- TODO: Localize labels after W-4693112 -->
    <div class="slds-form-element slds-size_1-of-3 slds-m-bottom_small">
        <lightning-combobox class="slds-col slds-grow conditionLogic"
                            label="Criteria for Executing Outcome"
                            value={conditionLogicValue}
                            options={conditionLogicOptions}
                            onchange={handleConditionLogicChange}></lightning-combobox>
    </div>

    <div class="slds-form-element slds-m-bottom_small">
        <lightning-input if:true={showCustomLogicInput} type="text" label="Custom Logic"
                         onfocusout={handleCustomLogicFocusOut}
                         value={outcome.conditionLogic.value}
                         required
                         message-when-value-missing={showErrorMessageIfBlank}
                         class="slds-col customLogic"></lightning-input>
    </div>

    <builder_platform_interaction-list items={conditions}
                                       onaddlistitem={handleAddCondition}
                                       onupdatelistitem={handleUpdateCondition}
                                       ondeletelistitem={handleDeleteCondition}
                                       add-label="Add Condition">
        <div slot="listBody">
            <template for:each={conditionsWithPrefixes} for:item="conditionWithPrefix" for:index="conditionIndex">
                <div class="slds-list__item slds-is-relative" key={conditionWithPrefix.rowIndex}>
                    <builder_platform_interaction-row item-prefix={conditionWithPrefix.prefix} show-prefix=true
                                                      item-index={conditionIndex} show-delete={showDeleteCondition}
                                                      key={conditionWithPrefix.condition.rowIndex}>
                        <div slot="rowBody">
                            <!-- TODO: Localize labels after W-4693112 -->
                            <builder_platform_interaction-expression-builder
                                    configuration={expressionBuilderConfig}
                                    expression={conditionWithPrefix.condition}
                                    lhs-label="Resource" operator-label="Operator"
                                    rhs-label="Value"
                                    lhs-placeholder={labels.lhsPlaceholder}
                                    operator-placeholder={labels.operatorPlaceholder}
                                    rhs-placeholder={labels.rhsPlaceholder}></builder_platform_interaction-expression-builder>
                        </div>
                    </builder_platform_interaction-row>
                </div>
            </template>
        </div>
    </builder_platform_interaction-list>
</template>