<template>
    <div class="slds-grid slds-m-bottom_x-small">
        <h3 class="slds-text-title_caps">
            <!-- TODO: Localize labels after W-4693112 -->
            <span class="slds-truncate">Outcome Details</span>
        </h3>
    </div>
    <builder_platform_interaction-label-description
            label={outcome.label}
            dev-name={outcome.name}
            onpropertychanged={handlePropertyChanged}
            hide-description=true>
    </builder_platform_interaction-label-description>

    <!-- TODO: Localize labels after W-4693112 -->
    <div class="slds-form-element slds-size_1-of-3">
        <lightning-combobox class="slds-col slds-grow"
                            label="Criteria for Executing Outcome"
                            value={conditionLogicValue}
                            options={conditionLogicOptions}
                            onchange={handleConditionLogicChange}></lightning-combobox>
    </div>

    <div class="slds-form-element">
        <!-- TODO: Localize labels after W-4693112 -->
        <lightning-input if:true={showCustomLogicInput} type="text" label="Custom Logic"
                         onfocusout={handleCustomLogicFocusOut}
                         value={outcome.conditionLogic.value}
                         required
                         message-when-value-missing={showErrorMessageIfBlank}
                         class="slds-col label"></lightning-input>
    </div>

    <builder_platform_interaction-list items={conditions}
                                             onaddlistitem={handleAddCondition}
                                             onupdatelistitem={handleUpdateCondition}
                                             ondeletelistitem={handleDeleteCondition}
                                             add-label='Add Condition'>
        <div slot="listBody">
            <template for:each={conditionsWithPrefixes} for:item="conditionWithPrefix" for:index="conditionIndex">
                <div class="slds-list__item slds-is-relative" key={conditionWithPrefix.rowIndex}>
                     <builder_platform_interaction-row item-prefix={conditionWithPrefix.prefix} show-prefix=true item-index={conditionIndex} show-delete={showDelete} key={conditionWithPrefix.condition.rowIndex}>
                        <div slot="rowBody">
                            <builder_platform_interaction-expression-builder element-type={expressionBuilderElementType} expression={conditionWithPrefix.condition} show-operator=true lhs-label="resource" operator-label="operator" rhs-label="value"></builder_platform_interaction-expression-builder>
                        </div>
                    </builder_platform_interaction-row>
                </div>
            </template>
        </div>
    </builder_platform_interaction-list>
</template>