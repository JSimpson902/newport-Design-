<template>
    <div class="slds-is-relative slds-p-vertical_small">
        <div if:true={showLoadingSpinner}>
            <lightning-spinner variant="brand" alternative-text={labels.spinnerAlternativeText}></lightning-spinner>
        </div>

        <div if:true={flowHasTests}>
            <div class="slds-grid slds-grid_align-end">
                <lightning-button-group class="slds-p-bottom_small slds-p-right_small slds-col">
                    <lightning-button
                        title={labels.createNewTest}
                        label={labels.createNewTest}
                        class="slds-button"
                        onclick={handleCreateNewTest}
                        data-id="create-button-w-table"
                    >
                    </lightning-button>
                </lightning-button-group>
            </div>
            <div class="flow-test-table">
                <lightning-datatable
                    key-field="flowTestId"
                    data={flowTestData}
                    columns={columns}
                    onrowaction={handleRowAction}
                    onrowselection={handleRowSelection}
                    onloadmore={loadMoreHandler}
                    is-loading={listIsLoadingMoreTests}
                    load-more-offset="5"
                    enable-infinite-loading
                >
                </lightning-datatable>
            </div>
        </div>
        <template if:false={flowHasTests}>
            <div
                class="slds-scoped-notification slds-media slds-media_center slds-scoped-notification_light"
                style="padding-left: 100px; margin-left: 150px; margin-right: 150px; padding-right: 100px"
                role="status"
            >
                <div class="slds-media__figure">
                    <lightning-icon icon-name="utility:info" size="small"></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <p>
                        {labels.flowTestBetaLegalNoticeText}
                        <lightning-formatted-url
                            value={legalAgreementLink}
                            label={labels.flowTestBetaUrlText}
                            target="_blank"
                        >
                        </lightning-formatted-url>
                    </p>
                </div>
            </div>
            <builder_platform_interaction-illustration
                illustration="lakeMountain"
                title={labels.flowTestBodyHeader}
                body={labels.flowTestBodyDescription}
            >
            </builder_platform_interaction-illustration>
            <lightning-button-group class="slds-align_absolute-center">
                <lightning-button
                    title={labels.createNewTest}
                    label={labels.createNewTest}
                    variant="brand"
                    class="slds-button slds-align-bottom slds-align_absolute-center"
                    onclick={handleCreateNewTest}
                    data-id="create-button"
                >
                </lightning-button>
            </lightning-button-group>
        </template>
    </div>
</template>
