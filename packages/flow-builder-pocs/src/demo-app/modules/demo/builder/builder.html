<template>
    <div class="app">
        <div class="toolbar" tabindex="0">
            <lightning-layout horizontal-align="spread" vertical-align="center">
                <lightning-layout-item>
                    <lightning-button-menu
                        alternative-text="Show menu"
                        variant="border-filled"
                        icon-name="utility:record_create"
                        class="slds-m-left_x-small"
                        onselect={handleSelectMenuItem}
                    >
                        <lightning-menu-item value="new" label="New"></lightning-menu-item>
                        <lightning-menu-item value="copy" label="Copy"></lightning-menu-item>
                        <lightning-menu-item value="load" label="Load Saved"></lightning-menu-item>
                        <lightning-menu-divider></lightning-menu-divider>
                        <lightning-menu-item value="save" label="Save"></lightning-menu-item>
                        <lightning-menu-item value="saveAsTestCase" label="Save As Test Case"></lightning-menu-item>
                        <lightning-menu-divider></lightning-menu-divider>
                        <lightning-menu-item
                            value="toggleSelectionMode"
                            label="Toggle Selection Mode"
                        ></lightning-menu-item>
                        <lightning-menu-item value="convertRoundtrip" label="Convert Round Trip"></lightning-menu-item>
                    </lightning-button-menu>
                    <lightning-button-icon
                        variant="border-filled"
                        icon-name="utility:undo"
                        onclick={handleUndo}
                        class="slds-m-left_x-small"
                    ></lightning-button-icon>
                    <lightning-button-icon
                        variant="border-filled"
                        icon-name="utility:redo"
                        onclick={handleRedo}
                        class="slds-m-left_x-small"
                    ></lightning-button-icon>
                    <lightning-combobox
                        class="slds-m-left_x-small"
                        name="testcase-combobox"
                        value={selectedTestCase}
                        placeholder="Load Test Case"
                        options={freeFormTestCaseOptions}
                        onchange={handleSelectTestCase}
                    ></lightning-combobox>

                    <lightning-combobox
                        class="slds-m-left_x-small"
                        name="flow-type"
                        value={selectedFlowType}
                        placeholder="Select Flow Type"
                        options={flowTypeOptions}
                        onchange={handleSelectFlowType}
                    ></lightning-combobox>
                    <lightning-input
                        class="slds-m-left_x-small"
                        type="checkbox"
                        label="Run assertions"
                        name="run-assertions"
                        onchange={handleToggleRunAssertions}
                        checked={runAssertions}
                    ></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item>
                    <button class="test-monkey-button slds-button slds-button_neutral" onclick={handleTestMonkeyClick}>
                        {testMonkeyLabel} &nbsp;<img class={testMonkeyClasses} src="./monkey.png" />
                    </button>
                </lightning-layout-item>
            </lightning-layout>
        </div>

        <div class="container">
            <builder_platform_interaction-left-panel
                onlocatoriconclicked={handleHighlightOnCanvas}
                elements={toolboxElements}
                palette={palette}
                class={leftPanelClass}
            ></builder_platform_interaction-left-panel>

            <builder_platform_interaction-alc-canvas-container
                oncanvasready={handleCanvasReady}
                if:true={elementsMetadata}
                onaddelement={handleAddElement}
                ondeleteelement={handleDeleteElement}
                onaddelementfault={handleAddElementFault}
                ondeleteelementfault={handleDeleteElementFault}
                elements-metadata={elementsMetadata}
                is-selection-mode={isSelectionMode}
                num-paste-elements-available={numPasteElementsAvailable}
                ontoggleselectionmode={handleToggleSelectionMode}
                onalcselection={handleAlcSelection}
                disable-animation={isRunningTestMonkey}
                disable-debounce={isRunningTestMonkey}
                oncreategotoconnection={handleGoToCreation}
                ondeletegotoconnection={handleGoToDeletion}
                oncopysingleelement={handleCopySingleElement}
                onpasteoncanvas={handlePasteOnCanvas}
                oneditelement={handleEditElement}
                show-left-panel={showLeftPanel}
            >
            </builder_platform_interaction-alc-canvas-container>
        </div>
    </div>
</template>
