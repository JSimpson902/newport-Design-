enforce-work-item-for-pr: true
core-deploy:
    enabled: true
    user-core-packager: true
    project-modules:
        ui-interaction-builder-components: ui-interaction-builder-components.version
jobs:
    build-and-test:
        memory-limit: 16
    create-canary-release:
        memory-limit: 16
    build-dependency:
        memory-limit: 16
    release:
        memory-limit: 16
branches:
    ~DEFAULT~:
        pull-request:
            workflow: build-and-test
            auto-start: false
            require-up-to-date-before-merge: true
            blocking-queue: true # https://confluence.internal.salesforce.com/display/UIPENGSYS/Core+Deployment+Config
            merge-method: disabled
            stages:
                release:
                    triggers:
                        - command
                        - check-rerun
        version:
            auto-increment: pre-release
            template: "{{slice pom.project.version '.' 0}}.9999.{{autoIncrement}}"
            initial-value: 9999
steps:
    npm-configure-for-publish:
        skip: true # until we are ready to ship npm packages
    npm-publish-release:
        skip: true # until we are ready to ship npm packages
